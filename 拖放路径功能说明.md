# 📝 拖放路径功能说明 v1.6.0

## 🎉 新功能：拖放文件到编辑器插入路径

现在当你从"文件信息浏览器"拖动文件到编辑器时，会自动：
1. ✅ **插入文件路径** - 在光标位置插入文件路径
2. ✅ **打开文件预览** - 在侧边打开文件预览（可配置）
3. ✅ **支持相对/绝对路径** - 可选择路径格式

## 🎯 使用方法

### 基本使用
1. 打开一个文件编辑器
2. 从"文件信息浏览器"拖动文件
3. 放到编辑器中的任意位置
4. **自动插入文件路径** ✨
5. **同时在侧边打开预览** ✨

### 示例场景

#### 场景1：编写配置文件
```json
{
  "entry": "   <- 在这里拖放文件，自动插入路径
}
```

拖放后变成：
```json
{
  "entry": "src/index.ts"
}
```

#### 场景2：编写文档引用
```markdown
查看详细说明：  <- 拖放文件到这里
```

拖放后变成：
```markdown
查看详细说明：docs/API.md
```

#### 场景3：编写导入语句
```typescript
import { something } from '   <- 拖放文件
```

拖放后变成：
```typescript
import { something } from 'src/utils/helper.ts'
```

## ⚙️ 配置选项

### 1. 使用相对路径还是绝对路径

```json
{
  "fileInfoDecorator.useRelativePathOnDrop": true  // 默认：相对路径
}
```

- **`true`** (默认) - 插入相对于工作区的路径
  - 例如：`src/utils/helper.ts`
  
- **`false`** - 插入绝对路径
  - 例如：`/Users/felix/Desktop/xxhFD/src/utils/helper.ts`

### 2. 是否同时打开文件预览

```json
{
  "fileInfoDecorator.openFileOnDrop": true  // 默认：打开
}
```

- **`true`** (默认) - 拖放时在侧边打开文件预览
- **`false`** - 只插入路径，不打开文件

## 🆚 路径格式对比

| 设置 | 拖放结果 | 适用场景 |
|------|---------|---------|
| 相对路径 (默认) | `src/components/Button.tsx` | 配置文件、导入语句、文档引用 |
| 绝对路径 | `/Users/felix/Desktop/project/src/components/Button.tsx` | 脚本、系统工具、跨项目引用 |

## 💡 实用技巧

### 技巧1：快速创建导入语句
1. 在代码中输入 `import {} from '`
2. 拖放目标文件到引号中间
3. 自动填充路径
4. 在侧边预览文件内容，复制导出的名称

### 技巧2：批量插入路径
可以一次拖放多个文件（按住 `Cmd/Ctrl` 多选），会依次插入路径

### 技巧3：切换路径类型
如果临时需要不同类型的路径：
1. 按 `Cmd+,` 打开设置
2. 搜索 `fileInfoDecorator.useRelativePathOnDrop`
3. 切换开关
4. 再次拖放

### 技巧4：只插入路径不预览
如果不想打开预览：
- 在设置中关闭 `fileInfoDecorator.openFileOnDrop`

## 🎬 完整工作流示例

### 编写React组件导入
1. **创建新文件** `App.tsx`
2. **输入导入语句模板**：
   ```tsx
   import Button from './'
   ```
3. **拖放** `components/Button.tsx` 到路径位置
4. **自动变成**：
   ```tsx
   import Button from './components/Button.tsx'
   ```
5. **侧边预览** Button 组件，确认导出名称
6. **完成导入**

### 编写配置文件
1. **打开** `package.json`
2. **添加** `"main": ""`
3. **拖放** `dist/index.js` 到引号中
4. **自动变成**：
   ```json
   {
     "main": "dist/index.js"
   }
   ```

## 🔧 高级配置

完整配置示例：

```json
{
  // 拖放功能
  "fileInfoDecorator.useRelativePathOnDrop": true,
  "fileInfoDecorator.openFileOnDrop": true,
  
  // 其他功能
  "fileInfoDecorator.showSize": true,
  "fileInfoDecorator.showDate": true,
  "fileInfoDecorator.dateFormat": "YYYY/M/D HH:mm"
}
```

## 📋 功能对比

| 操作 | 旧方式 | 新方式 (v1.6.0) |
|------|--------|----------------|
| 插入文件路径 | 手动输入或复制粘贴 | 直接拖放 ✨ |
| 查看文件内容 | 需要单独打开 | 自动预览 ✨ |
| 获取相对路径 | 手动计算 | 自动计算 ✨ |
| 切换路径类型 | 手动编辑 | 配置切换 ✨ |

## 🐛 故障排除

### 问题1：拖放后没有插入路径
- 确保拖放到编辑器区域（不是侧边栏）
- 确保光标在编辑器中有焦点
- 检查是否是只读文件

### 问题2：插入的路径格式不对
- 检查 `useRelativePathOnDrop` 设置
- 确保文件在工作区内（相对路径需要）

### 问题3：没有打开预览
- 检查 `openFileOnDrop` 设置是否为 `true`
- 确保不是文件夹（只有文件会预览）

## 📦 安装和更新

### 手动打包
```bash
cd /Users/felix/Desktop/xxhFD
npm run compile
vsce package
```

### 安装
```bash
code --install-extension file-info-decorator-1.6.0.vsix
```

### 重新加载
按 `Cmd+Shift+P` → 输入 `reload window`

---

## 🎉 总结

v1.6.0 版本让文件引用变得前所未有的简单：
- ✅ 拖放即插入路径
- ✅ 自动打开预览
- ✅ 智能路径计算
- ✅ 灵活配置选项

现在就去试试拖放功能吧！🚀




