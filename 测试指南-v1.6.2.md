# 🧪 File Info Decorator v1.6.2 测试指南

## 📦 安装步骤

### 方法1：使用安装脚本（推荐）

```bash
cd /Users/felix/Desktop/宝宝/xxhFD
./install-1.6.2.sh
```

### 方法2：手动安装

```bash
cd /Users/felix/Desktop/宝宝/xxhFD

# 为Cursor安装
cursor --install-extension file-info-decorator-1.6.2.vsix

# 或者为VSCode安装
code --install-extension file-info-decorator-1.6.2.vsix
```

### 重新加载

安装后必须重新加载窗口：
- 快捷键：`Command+Shift+P` → 输入 "Reload Window" → 回车

---

## 🧪 测试清单

### ✅ 测试1：快捷键 - Command+Backspace 删除文件

**目标：** 验证删除快捷键可以正常工作

**步骤：**

1. 在"文件信息浏览器"中找到一个测试文件
2. 点击选中该文件（确保文件被选中，有高亮显示）
3. 按 `Command+Backspace` (Mac) 或 `Delete` (Win/Linux)
4. 应该弹出确认对话框："确定要删除 'xxx' 吗？"
5. 点击"删除"按钮

**预期结果：**
- ✅ 弹出确认对话框
- ✅ 文件被成功删除
- ✅ 显示提示："已删除: xxx"

**如果失败：**
- ❌ 没有反应 → 检查是否选中了文件
- ❌ 提示"请先选择要删除的文件或文件夹" → 焦点不在树视图上，重新点击文件

---

### ✅ 测试2：快捷键 - Enter 重命名

**目标：** 验证重命名快捷键可以正常工作

**步骤：**

1. 选中一个文件
2. 按 `Enter`
3. 应该弹出输入框，显示当前文件名
4. 修改文件名（例如：添加 "-test"）
5. 按 `Enter` 确认

**预期结果：**
- ✅ 弹出重命名输入框
- ✅ 输入框中预填充了当前文件名
- ✅ 文件被成功重命名
- ✅ 显示提示："已重命名: old-name → new-name"

---

### ✅ 测试3：快捷键 - Command+C 复制

**目标：** 验证复制快捷键可以正常工作

**步骤：**

1. 选中一个文件
2. 按 `Command+C` (Mac) 或 `Ctrl+C` (Win/Linux)
3. 应该显示提示："已复制（可在文件管理器中粘贴）"

**预期结果：**
- ✅ 显示复制成功提示
- ✅ 文件路径已复制到剪贴板

---

### ✅ 测试4：快捷键 - Command+Shift+C 复制绝对路径

**目标：** 验证复制绝对路径快捷键可以正常工作

**步骤：**

1. 选中一个文件
2. 按 `Command+Shift+C` (Mac) 或 `Ctrl+Shift+C` (Win/Linux)
3. 应该显示提示："绝对路径已复制，可粘贴到Chat"
4. 打开一个文本编辑器，按 `Command+V` 粘贴

**预期结果：**
- ✅ 显示复制成功提示
- ✅ 粘贴的内容是完整的绝对路径，例如：`/Users/felix/Desktop/宝宝/xxhFD/package.json`

---

### ✅ 测试5：快捷键 - Command+Option+C 复制相对路径

**目标：** 验证复制相对路径快捷键可以正常工作

**步骤：**

1. 选中一个文件（确保文件在工作区内）
2. 按 `Command+Option+C` (Mac) 或 `Ctrl+Alt+C` (Win/Linux)
3. 应该显示提示："相对路径已复制到剪贴板"
4. 打开一个文本编辑器，按 `Command+V` 粘贴

**预期结果：**
- ✅ 显示复制成功提示
- ✅ 粘贴的内容是相对路径，例如：`src/extension.ts` 或 `package.json`

---

### ✅ 测试6：右键菜单 - 复制路径到Chat（相对路径）

**目标：** 验证右键菜单的"复制路径到Chat"功能使用相对路径

**步骤：**

1. 打开设置：`Command+,` → 搜索 "File Info Decorator"
2. 确认配置：`"fileInfoDecorator.useRelativePathForChat": true`
3. 在"文件信息浏览器"中右键点击一个文件
4. 选择 **"复制路径到Chat"**
5. 点击提示中的 **"立即打开Chat"** 按钮（可选）
6. 在任意位置按 `Command+V` 粘贴

**预期结果：**
- ✅ 显示提示："路径已复制: src/xxx.ts"
- ✅ 粘贴的内容是相对路径，例如：`src/extension.ts`
- ✅ 如果点击"立即打开Chat"，应该打开Cursor Chat面板

---

### ✅ 测试7：右键菜单 - 复制路径到Chat（绝对路径）

**目标：** 验证"复制路径到Chat"功能可以切换到绝对路径

**步骤：**

1. 打开设置：`Command+,` → 搜索 "File Info Decorator"
2. 修改配置：`"fileInfoDecorator.useRelativePathForChat": false`
3. 在"文件信息浏览器"中右键点击一个文件
4. 选择 **"复制路径到Chat"**
5. 在任意位置按 `Command+V` 粘贴

**预期结果：**
- ✅ 显示提示包含完整路径
- ✅ 粘贴的内容是绝对路径，例如：`/Users/felix/Desktop/宝宝/xxhFD/src/extension.ts`

---

### ✅ 测试8：拖放文件到Cursor Chat（相对路径）

**目标：** 验证拖放功能使用相对路径

**步骤：**

1. 确认配置：`"fileInfoDecorator.useRelativePathForChat": true`
2. 打开Cursor Chat面板（侧边栏）
3. 从"文件信息浏览器"拖动一个文件
4. 拖到Cursor Chat的输入框中
5. 松开鼠标

**预期结果：**
- ✅ Chat输入框中自动插入了文件路径
- ✅ 路径格式是相对路径，例如：`src/extension.ts`

**如果路径没有插入：**
- 尝试在输入框中按 `Command+V` 粘贴
- 路径应该在剪贴板中

---

### ✅ 测试9：拖放文件到Cursor Chat（绝对路径）

**目标：** 验证拖放功能可以切换到绝对路径

**步骤：**

1. 修改配置：`"fileInfoDecorator.useRelativePathForChat": false`
2. 从"文件信息浏览器"拖动一个文件到Cursor Chat输入框
3. 松开鼠标或按 `Command+V` 粘贴

**预期结果：**
- ✅ 路径格式是绝对路径，例如：`/Users/felix/Desktop/宝宝/xxhFD/src/extension.ts`

---

### ✅ 测试10：拖放多个文件

**目标：** 验证可以同时拖放多个文件

**步骤：**

1. 在"文件信息浏览器"中按住 `Command` 键
2. 依次点击选中多个文件
3. 拖动选中的文件到Cursor Chat输入框
4. 松开鼠标或按 `Command+V` 粘贴

**预期结果：**
- ✅ 多个文件路径被插入，每个路径占一行
- ✅ 例如：
  ```
  src/extension.ts
  package.json
  README.md
  ```

---

### ✅ 测试11：文件选中视觉效果

**目标：** 验证文件选中时的视觉效果正常

**步骤：**

1. 在"文件信息浏览器"中点击选中一个文件
2. 观察选中后的背景颜色
3. 点击窗口的其他地方，再点回文件
4. 观察焦点状态下和非焦点状态下的颜色差异

**预期结果：**
- ✅ 选中时有明显的高亮效果
- ✅ 焦点状态下颜色更深
- ✅ 非焦点状态下颜色稍浅但仍可见
- ✅ 样式与VSCode原生文件浏览器一致

---

### ✅ 测试12：快捷键在未选中文件时的提示

**目标：** 验证快捷键的错误提示正常工作

**步骤：**

1. 点击窗口的其他地方（不选中任何文件）
2. 焦点切换到"文件信息浏览器"，但不选中文件
3. 按 `Command+Backspace` 删除快捷键

**预期结果：**
- ✅ 显示错误提示："请先选择要删除的文件或文件夹"
- ✅ 不会执行删除操作

---

## 📊 测试结果记录表

| 测试项 | 状态 | 备注 |
|-------|------|------|
| Test 1: Command+Backspace 删除 | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 2: Enter 重命名 | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 3: Command+C 复制 | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 4: Command+Shift+C 绝对路径 | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 5: Command+Option+C 相对路径 | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 6: 右键复制路径(相对) | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 7: 右键复制路径(绝对) | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 8: 拖放到Chat(相对) | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 9: 拖放到Chat(绝对) | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 10: 拖放多个文件 | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 11: 选中视觉效果 | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |
| Test 12: 未选中时的提示 | ⬜️ 未测试 / ✅ 通过 / ❌ 失败 | |

---

## 🐛 问题排查

### 问题1：快捷键没有反应

**可能原因：**
1. 焦点不在"文件信息浏览器"上
2. 没有选中文件
3. 快捷键冲突

**解决方法：**
1. 点击"文件信息浏览器"面板，确保焦点在上面
2. 点击选中一个文件
3. 检查VSCode的快捷键设置，查看是否有冲突

### 问题2：拖放到Chat没有插入路径

**可能原因：**
1. Cursor Chat不支持拖放
2. 路径在剪贴板中但没有自动粘贴

**解决方法：**
1. 拖放后，在Chat输入框中按 `Command+V` 手动粘贴
2. 或者使用右键菜单"复制路径到Chat"功能

### 问题3：路径格式不对

**可能原因：**
1. 配置设置不正确
2. 文件不在工作区内（相对路径无法计算）

**解决方法：**
1. 检查设置：`fileInfoDecorator.useRelativePathForChat`
2. 如果文件在工作区外，会自动使用绝对路径

### 问题4：选中颜色不明显

**可能原因：**
1. 主题配色问题
2. 没有正确应用主题颜色

**解决方法：**
1. 尝试切换不同的主题
2. 确保使用了最新版本的扩展
3. 重新加载窗口

---

## 📝 测试完成后

完成所有测试后，请：

1. ✅ 记录测试结果（通过/失败/问题）
2. ✅ 如果发现问题，记录详细信息：
   - 操作系统版本
   - Cursor/VSCode版本
   - 具体的操作步骤
   - 错误信息或截图
3. ✅ 提供反馈

---

## 🎉 测试愉快！

如有任何问题，请联系开发团队。





