# ğŸ”„ åˆ·æ–°åŠŸèƒ½ä¼˜åŒ–è¯´æ˜ v1.5.0

## é—®é¢˜æè¿°
ä¹‹å‰ç‰ˆæœ¬çš„åˆ·æ–°åŠŸèƒ½æœ‰æ—¶æ— æ³•åŠæ—¶åæ˜ æ–‡ä»¶ç³»ç»Ÿçš„çœŸå®å˜åŒ–ï¼Œå³ä½¿æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œç‚¹å‡»åˆ·æ–°åä¹Ÿå¯èƒ½ä¸æ˜¾ç¤ºã€‚

## âœ… ä¼˜åŒ–å†…å®¹

### 1. å¼ºåˆ¶åˆ·æ–°æœºåˆ¶
- æ·»åŠ äº† `forceRefresh()` æ–¹æ³•ï¼Œæ¯æ¬¡åˆ·æ–°éƒ½ä¼šï¼š
  - **æ¸…é™¤æ‰€æœ‰ç¼“å­˜**
  - **å¼ºåˆ¶é‡æ–°è¯»å–æ–‡ä»¶ç³»ç»Ÿ**
  - **ç«‹å³æ›´æ–°è§†å›¾**

### 2. æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ
- å®ç°äº†çŸ­æœŸç¼“å­˜ï¼ˆ1ç§’ï¼‰ä»¥æé«˜æ€§èƒ½
- ç”¨æˆ·ä¸»åŠ¨åˆ·æ–°æ—¶ä¼šç«‹å³æ¸…é™¤ç¼“å­˜
- è‡ªåŠ¨åˆ·æ–°æ—¶ä½¿ç”¨ç¼“å­˜é¿å…é¢‘ç¹IOæ“ä½œ

### 3. é˜²æŠ–æœºåˆ¶
- ç”¨æˆ·åˆ·æ–°ï¼š100ms é˜²æŠ–
- æ–‡ä»¶ç³»ç»Ÿç›‘å¬ï¼š200ms é˜²æŠ–
- é¿å…é¢‘ç¹åˆ·æ–°é€ æˆæ€§èƒ½é—®é¢˜

### 4. æ”¹è¿›æ–‡ä»¶ç³»ç»Ÿç›‘å¬
- ä¼˜åŒ–æ–‡ä»¶ç³»ç»Ÿç›‘å¬å™¨çš„å“åº”é€Ÿåº¦
- ä½¿ç”¨ `forceRefresh()` ç¡®ä¿ç«‹å³æ›´æ–°
- æ”¶é›†å¤šä¸ªæ–‡ä»¶å˜åŒ–åä¸€èµ·åˆ·æ–°

### 5. æ‰€æœ‰æ“ä½œåå¼ºåˆ¶åˆ·æ–°
ä»¥ä¸‹æ“ä½œå®Œæˆåéƒ½ä¼šç«‹å³å¼ºåˆ¶åˆ·æ–°ï¼š
- âœ… æ–°å»ºæ–‡ä»¶
- âœ… æ–°å»ºæ–‡ä»¶å¤¹
- âœ… åˆ é™¤æ–‡ä»¶/æ–‡ä»¶å¤¹
- âœ… é‡å‘½å
- âœ… å‰ªåˆ‡/å¤åˆ¶/ç²˜è´´
- âœ… æ‹–æ”¾ç§»åŠ¨
- âœ… æ‰‹åŠ¨ç‚¹å‡»åˆ·æ–°æŒ‰é’®

### 6. æ›´å¯é çš„æ–‡ä»¶è¯»å–
- ä½¿ç”¨ `fs.readdirSync()` with `withFileTypes` é€‰é¡¹
- æ¯æ¬¡éƒ½é‡æ–°è°ƒç”¨ `fs.statSync()` è·å–æœ€æ–°çŠ¶æ€
- æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## ğŸ¯ ä½¿ç”¨å»ºè®®

### å¦‚æœæ–‡ä»¶è¿˜æ˜¯ä¸æ˜¾ç¤ºï¼š
1. **ç‚¹å‡»åˆ·æ–°æŒ‰é’®** ğŸ”„ - ä¼šæ˜¾ç¤º"å·²åˆ·æ–°æ–‡ä»¶åˆ—è¡¨"æç¤º
2. **ç¨ç­‰200ms** - ç»™æ–‡ä»¶ç³»ç»Ÿç›‘å¬å™¨ä¸€ç‚¹æ—¶é—´
3. **æ£€æŸ¥æ–‡ä»¶æ˜¯å¦çœŸçš„å­˜åœ¨** - åœ¨åŸç”Ÿèµ„æºç®¡ç†å™¨ä¸­éªŒè¯
4. **æŸ¥çœ‹å¼€å‘è€…å·¥å…·** - `å¸®åŠ©` â†’ `åˆ‡æ¢å¼€å‘äººå‘˜å·¥å…·` â†’ `Console`

### æ€§èƒ½ä¼˜åŒ–ï¼š
- çŸ­æœŸå†…çš„é‡å¤è¯»å–ä¼šä½¿ç”¨ç¼“å­˜ï¼ˆ1ç§’ï¼‰
- ç”¨æˆ·ä¸»åŠ¨åˆ·æ–°ä¼šç«‹å³æ¸…é™¤ç¼“å­˜
- å¤šä¸ªæ–‡ä»¶å˜åŒ–ä¼šè¢«æ”¶é›†åä¸€èµ·åˆ·æ–°

## ğŸ“Š åˆ·æ–°æ—¶æœºå¯¹æ¯”

| æ“ä½œ | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ |
|------|--------|--------|
| ç‚¹å‡»åˆ·æ–°æŒ‰é’® | æ™®é€šåˆ·æ–° | å¼ºåˆ¶åˆ·æ–° + æ¸…é™¤ç¼“å­˜ âœ… |
| æ–°å»ºæ–‡ä»¶ | æ™®é€šåˆ·æ–° | å¼ºåˆ¶åˆ·æ–° + ç«‹å³æ˜¾ç¤º âœ… |
| åˆ é™¤æ–‡ä»¶ | æ™®é€šåˆ·æ–° | å¼ºåˆ¶åˆ·æ–° + ç«‹å³ç§»é™¤ âœ… |
| æ–‡ä»¶ç³»ç»Ÿå˜åŒ– | å»¶è¿Ÿåˆ·æ–° | 200msé˜²æŠ– + å¼ºåˆ¶åˆ·æ–° âœ… |
| æ‹–æ”¾æ–‡ä»¶ | æ™®é€šåˆ·æ–° | å¼ºåˆ¶åˆ·æ–° + æ¸…é™¤ç¼“å­˜ âœ… |

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### ä»£ç æ”¹è¿›ï¼š

```typescript
// æ—§ç‰ˆæœ¬
refresh(): void {
    this._onDidChangeTreeData.fire();
}

// æ–°ç‰ˆæœ¬
refresh(): void {
    this.fileCache.clear();  // æ¸…é™¤ç¼“å­˜
    // 100ms é˜²æŠ–
    this.refreshTimeout = setTimeout(() => {
        this._onDidChangeTreeData.fire();
    }, 100);
}

forceRefresh(): void {
    this.fileCache.clear();  // æ¸…é™¤ç¼“å­˜
    clearTimeout(this.refreshTimeout);  // å–æ¶ˆé˜²æŠ–
    this._onDidChangeTreeData.fire();  // ç«‹å³åˆ·æ–°
}
```

### æ–‡ä»¶è¯»å–ä¼˜åŒ–ï¼š

```typescript
// ä½¿ç”¨ withFileTypes æé«˜æ€§èƒ½
const entries = fs.readdirSync(dirPath, { withFileTypes: true });

// æ¯æ¬¡éƒ½é‡æ–°è·å–æœ€æ–°çŠ¶æ€
const stats = fs.statSync(fullPath);
```

## ğŸ“¦ å¦‚ä½•æ›´æ–°

å·²ç¼–è¯‘å®Œæˆï¼Œè¯·æ‰‹åŠ¨æ‰“åŒ…ï¼š

```bash
cd /Users/felix/Desktop/xxhFD
vsce package
```

ç„¶åå®‰è£…ï¼š

```bash
code --install-extension file-info-decorator-1.5.0.vsix
```

é‡æ–°åŠ è½½çª—å£åå³å¯ä½“éªŒä¼˜åŒ–åçš„åˆ·æ–°åŠŸèƒ½ï¼

---

## ğŸ‰ æœŸå¾…æ•ˆæœ

æ›´æ–°åï¼Œä½ åº”è¯¥ä¼šæ„Ÿå—åˆ°ï¼š
1. âœ… ç‚¹å‡»åˆ·æ–°æŒ‰é’®å**ç«‹å³**çœ‹åˆ°æœ€æ–°æ–‡ä»¶
2. âœ… åˆ›å»ºæ–‡ä»¶å**è‡ªåŠ¨**æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
3. âœ… åˆ é™¤æ–‡ä»¶å**ç¬é—´**ä»åˆ—è¡¨ç§»é™¤
4. âœ… æ–‡ä»¶ç³»ç»Ÿå˜åŒ–å**å¿«é€Ÿ**åŒæ­¥
5. âœ… æ€§èƒ½æ›´å¥½ï¼Œä¸ä¼šé¢‘ç¹åˆ·æ–°å¯¼è‡´å¡é¡¿

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹å¼€å‘è€…å·¥å…·çš„Consoleæ—¥å¿—ï¼




